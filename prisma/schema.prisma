generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Employee {
  id    Int     @id @default(autoincrement())
  name  String
  email String? @unique(map: "Employee_email_key")
  phone String?

  @@map("employee")
}

model Job {
  id                     Int               @id @default(autoincrement())
  job_id                 String            @unique(map: "Job_job_id_key")
  client_name            String
  client_email           String
  client_phone           String
  mode_received          job_mode_received
  job_description        String
  assigned_to            Int?
  target_completion_date DateTime
  status                 job_status        @default(New)
  is_delivered           Boolean           @default(false)
  invoice_raised         Boolean           @default(false)
  invoice_number         String?
  invoice_amount         Float?
  payment_received       Boolean           @default(false)
  payment_mode           String?
  payment_reference      String?
  created_at             DateTime          @default(now())
  updated_at             DateTime          @updatedAt

  @@index([assigned_to], map: "Job_assigned_to_fkey")
  @@map("job")
}

model User {
  id       Int    @id @default(autoincrement())
  name     String
  email    String @unique(map: "User_email_key")
  password String
  role     Role   @default(user)

  @@map("user")
}

enum Role {
  admin
  user
}

enum job_mode_received {
  Email
  Phone
  WhatsApp
  PhysicalDocuments
  Other
}

enum job_status {
  New
  InProgress
  Completed
  Cancelled
}
